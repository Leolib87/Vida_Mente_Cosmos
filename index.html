<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Treemap y Gráfico de Redes con D3.js</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    #treemap {
      width: 400px;
      height: 400px;
      float: left;
    }

    #network {
      width: 600px;
      height: 400px;
      float: left;
    }
  </style>
</head>
<body>
  <h1>Treemap y Gráfico de Redes con D3.js</h1>

  <div id="treemap">
    // Datos de ejemplo para los científicos famosos y el número de publicaciones
var data = [
  { name: "Albert Einstein", publications: 300 },
  { name: "Marie Curie", publications: 200 },
  { name: "Isaac Newton", publications: 250 },
  { name: "Stephen Hawking", publications: 150 },
  { name: "Galileo Galilei", publications: 180 },
];

// Configuración del tamaño del gráfico
var width = 800;
var height = 400;

// Definir una escala de colores
var colorScale = d3.scaleOrdinal(d3.schemeCategory10);

// Crear el elemento SVG
var svg = d3.select("#chart")
  .append("svg")
  .attr("width", width)
  .attr("height", height);

// Crear la jerarquía de datos
var root = d3.hierarchy({ children: data })
  .sum(d => d.publications);

// Crear el generador de treemap
var treemap = d3.treemap()
  .size([width, height]);

// Generar el treemap
treemap(root);

// Crear los rectángulos para representar los datos
svg.selectAll("rect")
  .data(root.leaves())
  .enter()
  .append("rect")
  .attr("x", d => d.x0)
  .attr("y", d => d.y0)
  .attr("width", d => d.x1 - d.x0)
  .attr("height", d => d.y1 - d.y0)
  .attr("fill", (d, i) => colorScale(i)); // Asignar color en función del índice

// Agregar etiquetas de texto para el nombre y el porcentaje
svg.selectAll("text")
  .data(root.leaves())
  .enter()
  .append("text")
  .attr("x", d => d.x0 + 5)
  .attr("y", d => d.y0 + 20)
  .text(d => d.data.name)
  .attr("fill", "white");

svg.selectAll(".percentage")
  .data(root.leaves())
  .enter()
  .append("text")
  .attr("class", "percentage")
  .attr("x", d => d.x0 + 5)
  .attr("y", d => d.y0 + 40)
  .text(d => d.data.publications + " (" + ((d.x1 - d.x0) * (d.y1 - d.y0) * 100 / (width * height)).toFixed(2) + "%)")
  .attr("fill", "black");</div>
  <div id="network"></div>

  <script src="treemap.js"></script>
  <script src="network.js"></script>
</body>
</html>
