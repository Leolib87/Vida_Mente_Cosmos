<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Visualizaciones D3.js</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <style>
    /* Estilos CSS para el contenedor del treemap */
    #treemap-container {
      width: 600px;
      height: 400px;
    }

    /* Estilos CSS para el contenedor de la visualización de redes */
    #network-container {
      width: 600px;
      height: 400px;
    }
  </style>
</head>

<body>
  <h1>Visualizaciones D3.js</h1>

  <h2>Treemap</h2>
  <div id="treemap-container"></div>

  <h2>Visualización de Redes</h2>
  <div id="network-container"></div>

  <script>
    // Datos simulados para el treemap
    const treemapData = {
      name: 'Científicos',
      children: [
        { name: 'Albert Einstein', citas: 1000 },
        { name: 'Isaac Newton', citas: 900 },
        { name: 'Marie Curie', citas: 800 },
        { name: 'Galileo Galilei', citas: 700 },
        { name: 'Nikola Tesla', citas: 600 },
        { name: 'Charles Darwin', citas: 500 },
        { name: 'Ada Lovelace', citas: 400 },
        { name: 'Stephen Hawking', citas: 300 },
        { name: 'Alan Turing', citas: 200 },
        { name: 'Rosalind Franklin', citas: 100 }
      ]
    };

    // Crear el treemap
    const treemapContainer = d3.select('#treemap-container');
    const treemapWidth = parseInt(treemapContainer.style('width'));
    const treemapHeight = parseInt(treemapContainer.style('height'));

    const treemap = d3.treemap()
      .size([treemapWidth, treemapHeight]);

    const root = d3.hierarchy(treemapData)
      .sum(d => d.citas);

    treemap(root);

    treemapContainer.selectAll('rect')
      .data(root.leaves())
      .join('rect')
      .attr('x', d => d.x0)
      .attr('y', d => d.y0)
      .attr('width', d => d.x1 - d.x0)
      .attr('height', d => d.y1 - d.y0)
      .attr('fill', 'steelblue')
      .attr('stroke', 'white');

    treemapContainer.selectAll('text')
      .data(root.leaves())
      .join('text')
      .attr('x', d => d.x0 + 5)
      .attr('y', d => d.y0 + 15)
      .text(d => d.data.name)
      .attr('fill', 'white');

    // Datos simulados para la visualización de redes
    const networkData = {
      nodes: [
        { id: 'Albert Einstein' },
        { id: 'Isaac Newton' },
        { id: 'Marie Curie' },
        { id: 'Galileo Galilei' },
        { id: 'Nikola Tesla' }
      ],
      links: [
        { source: 'Albert Einstein', target: 'Isaac Newton' },
        { source: 'Albert Einstein', target: 'Marie Curie' },
        { source: 'Marie Curie', target: 'Galileo Galilei' },
        { source: 'Nikola Tesla', target: 'Galileo Galilei' },
        { source: 'Galileo Galilei', target: 'Isaac Newton' }
      ]
    };

    // Crear la visualización de redes
    const networkContainer = d3.select('#network-container');
    const networkWidth = parseInt(networkContainer.style('width'));
    const networkHeight = parseInt(networkContainer.style('height'));

    const simulation = d3.forceSimulation(networkData.nodes)
      .force('link', d3.forceLink(networkData.links).id(d => d.id))
      .force('charge', d3.forceManyBody().strength(-100))
      .force('center', d3.forceCenter(networkWidth / 2, networkHeight / 2));

    const links = networkContainer.selectAll('line')
      .data(networkData.links)
      .join('line')
      .attr('stroke', 'gray');

    const nodes = networkContainer.selectAll('circle')
      .data(networkData.nodes)
      .join('circle')
      .attr('r', 8)
      .attr('fill', 'steelblue');

    simulation.on('tick', () => {
      links
        .attr('x1', d => d.source.x)
        .attr('y1', d => d.source.y)
        .attr('x2', d => d.target.x)
        .attr('y2', d => d.target.y);

      nodes
        .attr('cx', d => d.x)
        .attr('cy', d => d.y);
    });
  </script>
</body>

</html>
