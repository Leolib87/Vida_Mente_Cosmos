<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Página con gráficos</title>
  <style>
    #treemap, #network {
      width: 500px;
      height: 400px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <div id="treemap"></div>
  <div id="network"></div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    // Datos de ejemplo para el treemap
    const treemapData = {
      name: "Científicos",
      children: [
        { name: "Einstein", citations: 100 },
        { name: "Newton", citations: 80 },
        { name: "Curie", citations: 70 },
        // Agrega más científicos y sus citas aquí
      ]
    };

    // Configuración del tamaño del contenedor del treemap
    const treemapWidth = 500;
    const treemapHeight = 400;

    // Crear el treemap
    const treemap = d3.treemap()
      .size([treemapWidth, treemapHeight])
      .paddingOuter(5);

    // Seleccionar el contenedor del treemap en el HTML
    const treemapContainer = d3.select("#treemap");

    // Generar el layout del treemap
    const treemapRoot = d3.hierarchy(treemapData)
      .sum(d => d.citations)
      .sort((a, b) => b.citations - a.citations);

    treemap(treemapRoot);

    // Crear los rectángulos del treemap
    treemapContainer.selectAll("rect")
      .data(treemapRoot.leaves())
      .enter()
      .append("rect")
      .attr("x", d => d.x0)
      .attr("y", d => d.y0)
      .attr("width", d => d.x1 - d.x0)
      .attr("height", d => d.y1 - d.y0)
      .attr("fill", "steelblue");

    // Agregar etiquetas de texto en los rectángulos
    treemapContainer.selectAll("text")
      .data(treemapRoot.leaves())
      .enter()
      .append("text")
      .attr("x", d => d.x0 + 5)
      .attr("y", d => d.y0 + 15)
      .text(d => d.data.name)
      .attr("fill", "white");

    // Datos de ejemplo para la visualización de redes
    const networkData = {
      nodes: [
        { id: "Einstein", citations: 100 },
        { id: "Newton", citations: 80 },
        { id: "Curie", citations: 70 },
        // Agrega más científicos y sus citas aquí
      ],
      links: [
        { source: "Einstein", target: "Newton" },
        { source: "Einstein", target: "Curie" },
        // Agrega más conexiones entre científicos aquí
      ]
    };

    // Configuración del tamaño del contenedor de la visualización de redes
    const networkWidth = 500;
    const networkHeight = 400;

    // Crear la visualización de redes
    const networkContainer = d3.select("#network")
      .append("svg")
      .attr("width", networkWidth)
      .attr("height", networkHeight);

    // Crear los enlaces
    const links = networkContainer.selectAll("line")
      .data(networkData.links)
      .enter()
      .append("line")
      .attr("stroke", "#ccc")
      .attr("stroke-width", d => Math.sqrt(d.source.citations));

    // Crear los nodos
    const nodes = networkContainer.selectAll("circle")
      .data(networkData.nodes)
      .enter()
      .append("circle")
      .attr("r", d => Math.sqrt(d.citations))
      .attr("fill", (d, i) => d3.schemeCategory10[i % 10]);

    // Agregar nombres de científicos a los nodos
    networkContainer.selectAll("text")
      .data(networkData.nodes)
      .enter()
      .append("text")
      .text(d => d.id)
      .attr("dx", 12)
      .attr("dy", 4);

    // Crear la simulación de la fuerza de la red
    const simulation = d3.forceSimulation(networkData.nodes)
      .force("link", d3.forceLink(networkData.links))
      .force("charge", d3.forceManyBody().strength(-50))
      .force("center", d3.forceCenter(networkWidth / 2, networkHeight / 2));

    simulation.on("tick", () => {
      links
        .attr("x1", d => d.source.x)
        .attr("y1", d => d.source.y)
        .attr("x2", d => d.target.x)
        .attr("y2", d => d.target.y);

      nodes
        .attr("cx", d => d.x)
        .attr("cy", d => d.y);

      networkContainer.selectAll("text")
        .attr("x", d => d.x + 12)
        .attr("y", d => d.y + 4);
    });
  </script>
</body>
</html>


